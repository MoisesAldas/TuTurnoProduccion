
> my-v0-project@0.1.0 test
> vitest src/__tests__ --run


[1m[46m RUN [49m[22m [36mv4.0.16 [39m[90mC:/Users/LENOVO/Desktop/Tesis/TuTurnoProduccion[39m

 [32mÔ£ô[39m src/__tests__/security/security.test.ts [2m([22m[2m24 tests[22m[2m)[22m[32m 12[2mms[22m[39m
 [32mÔ£ô[39m src/__tests__/integration/hooks/useRealtimeNotifications.test.ts [2m([22m[2m25 tests[22m[2m)[22m[32m 16[2mms[22m[39m
 [32mÔ£ô[39m src/__tests__/unit/lib/export/exportData.test.ts [2m([22m[2m15 tests[22m[2m)[22m[32m 16[2mms[22m[39m
 [32mÔ£ô[39m src/__tests__/integration/hooks/useAuth.test.tsx [2m([22m[2m20 tests[22m[2m)[22m[32m 16[2mms[22m[39m
 [32mÔ£ô[39m src/__tests__/integration/api/users/create-user.test.ts [2m([22m[2m16 tests[22m[2m)[22m[32m 18[2mms[22m[39m
 [32mÔ£ô[39m src/__tests__/integration/api/notifications/notifications.test.ts [2m([22m[2m23 tests[22m[2m)[22m[32m 16[2mms[22m[39m
 [31mÔØ»[39m src/__tests__/integration/api/users/delete-account.test.ts [2m([22m[2m26 tests[22m[2m | [22m[31m8 failed[39m[2m)[22m[32m 32[2mms[22m[39m
[31m       [31m├ù[31m deber├¡a eliminar cuenta de cliente sin citas activas[39m[32m 10[2mms[22m[39m
[31m       [31m├ù[31m deber├¡a rechazar eliminaci├│n con citas pendientes[39m[32m 2[2mms[22m[39m
[31m       [31m├ù[31m deber├¡a rechazar eliminaci├│n con citas confirmadas[39m[32m 1[2mms[22m[39m
[31m       [31m├ù[31m deber├¡a permitir eliminaci├│n con solo citas completadas o canceladas[39m[32m 1[2mms[22m[39m
       [32mÔ£ô[39m deber├¡a rechazar eliminaci├│n si tiene negocio activo[32m 1[2mms[22m[39m
[31m       [31m├ù[31m deber├¡a rechazar si el negocio tiene citas activas[39m[32m 1[2mms[22m[39m
       [32mÔ£ô[39m deber├¡a rechazar si el negocio tiene empleados[32m 1[2mms[22m[39m
[31m       [31m├ù[31m deber├¡a permitir eliminaci├│n si el negocio est├í inactivo[39m[32m 1[2mms[22m[39m
[31m       [31m├ù[31m deber├¡a eliminar en orden correcto (cascada)[39m[32m 1[2mms[22m[39m
       [32mÔ£ô[39m deber├¡a limpiar datos relacionados antes de eliminar[32m 1[2mms[22m[39m
[31m       [31m├ù[31m deber├¡a manejar rollback si falla eliminaci├│n de auth[39m[32m 1[2mms[22m[39m
       [32mÔ£ô[39m deber├¡a verificar que el usuario est├í autenticado[32m 0[2mms[22m[39m
       [32mÔ£ô[39m deber├¡a verificar que el usuario solo puede eliminar su propia cuenta[32m 2[2mms[22m[39m
       [32mÔ£ô[39m deber├¡a requerir confirmaci├│n expl├¡cita[32m 0[2mms[22m[39m
       [32mÔ£ô[39m deber├¡a validar contrase├▒a antes de eliminar[32m 0[2mms[22m[39m
       [32mÔ£ô[39m deber├¡a enviar email de confirmaci├│n de eliminaci├│n[32m 0[2mms[22m[39m
       [32mÔ£ô[39m deber├¡a notificar a negocios con citas del usuario[32m 0[2mms[22m[39m
       [32mÔ£ô[39m deber├¡a manejar error de permisos[32m 0[2mms[22m[39m
       [32mÔ£ô[39m deber├¡a manejar error de usuario no encontrado[32m 0[2mms[22m[39m
       [32mÔ£ô[39m deber├¡a manejar error de conexi├│n[32m 0[2mms[22m[39m
       [32mÔ£ô[39m deber├¡a revertir cambios si falla alg├║n paso[32m 0[2mms[22m[39m
       [32mÔ£ô[39m deber├¡a retornar confirmaci├│n de eliminaci├│n exitosa[32m 1[2mms[22m[39m
       [32mÔ£ô[39m deber├¡a retornar detalles de error si falla[32m 0[2mms[22m[39m
       [32mÔ£ô[39m deber├¡a manejar usuario con m├║ltiples roles[32m 0[2mms[22m[39m
       [32mÔ£ô[39m deber├¡a manejar eliminaci├│n de cuenta sin email verificado[32m 0[2mms[22m[39m
       [32mÔ£ô[39m deber├¡a permitir reactivaci├│n dentro de per├¡odo de gracia[32m 0[2mms[22m[39m
 [32mÔ£ô[39m src/__tests__/unit/lib/utils/format.test.ts [2m([22m[2m21 tests[22m[2m)[22m[32m 64[2mms[22m[39m
 [32mÔ£ô[39m src/__tests__/unit/lib/dateUtils.test.ts [2m([22m[2m22 tests[22m[2m)[22m[32m 52[2mms[22m[39m
 [32mÔ£ô[39m src/__tests__/unit/lib/validation.test.ts [2m([22m[2m40 tests[22m[2m)[22m[32m 34[2mms[22m[39m
 [32mÔ£ô[39m src/__tests__/integration/api/appointments/respond.test.ts [2m([22m[2m12 tests[22m[2m)[22m[32m 16[2mms[22m[39m
 [32mÔ£ô[39m src/__tests__/unit/components/Badge.test.tsx [2m([22m[2m15 tests[22m[2m)[22m[32m 109[2mms[22m[39m
 [32mÔ£ô[39m src/__tests__/unit/lib/tokenUtils.test.ts [2m([22m[2m14 tests[22m[2m)[22m[32m 9[2mms[22m[39m
 [32mÔ£ô[39m src/__tests__/integration/hooks/useBusiness.test.tsx [2m([22m[2m16 tests[22m[2m)[22m[32m 9[2mms[22m[39m
 [32mÔ£ô[39m src/__tests__/integration/api/users/complete-profile.test.ts [2m([22m[2m14 tests[22m[2m)[22m[32m 7[2mms[22m[39m
 [32mÔ£ô[39m src/__tests__/ejemplo.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 5[2mms[22m[39m
node.exe : 
En línea: 1 Carácter: 1
+ & "C:\Program 
Files\nodejs/node.exe" 
"C:\Program 
Files\nodejs/node_mo ...
+ ~~~~~~~~~~~~~~~~~~~~~~
~~~~~~~~~~~~~~~~~~~~~~~~
~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo      
    : N    otSpecified: 
(:String) [],     
RemoteException
    + 
FullyQualifiedErrorId : 
N    ativeCommandError
 
[31mÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»
[39m[1m[41m Failed 
Suites 3 [49m[22m[31m
ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»[3
9m

[41m[1m FAIL 
[22m[49m src/__tests__
/e2e/auth.spec.ts[2m [ 
src/__tests__/e2e/auth.s
pec.ts ][22m
[31m[1mError[22m: 
Playwright Test did not 
expect test.describe() 
to be called here.
Most common reasons 
include:
- You are calling 
test.describe() in a 
configuration file.
- You are calling 
test.describe() in a 
file that is imported 
by the configuration 
file.
- You have two 
different versions of 
@playwright/test. This 
usually happens
  when one of the 
dependencies in your 
package.json depends on 
@playwright/test.[39m
[90m [2mÔØ»[22m TestT
ypeImpl._currentSuite no
de_modules/playwright/li
b/common/testType.js:[2
m75:13[22m[39m
[90m [2mÔØ»[22m 
TestTypeImpl._describe n
ode_modules/playwright/l
ib/common/testType.js:[
2m115:24[22m[39m
[90m [2mÔØ»[22m 
Function.describe node_m
odules/playwright/lib/tr
ansform/transform.js:[2
m275:12[22m[39m
[36m [2mÔØ»[22m src/_
_tests__/e2e/auth.spec.t
s:[2m13:6[22m[39m
    [90m 11| [39m 
*/[39m
    [90m 12| [39m
    [90m 13| [39mtest
[33m.[39m[34mdescribe
[39m([32m"Autenticaci├│
n de Usuario"[39m[33m,
[39m () [33m=>[39m {
    [90m   | [39m     
[31m^[39m
    [90m 14| [39m  tes
t[33m.[39m[34mbeforeE
ach[39m([35masync[39m
 ({ page }) 
[33m=>[39m {
    [90m 15| [39m    
[90m// Navegar a la 
p├ígina de login antes 
de cada test[39m

[31m[2mÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»
ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»
ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»
ÔÄ»ÔÄ»[1/11]ÔÄ»[22m[39
m

[41m[1m FAIL 
[22m[49m src/__tests__
/e2e/booking.spec.ts[2m
 [ src/__tests__/e2e/boo
king.spec.ts ][22m
[31m[1mError[22m: 
Playwright Test did not 
expect test.describe() 
to be called here.
Most common reasons 
include:
- You are calling 
test.describe() in a 
configuration file.
- You are calling 
test.describe() in a 
file that is imported 
by the configuration 
file.
- You have two 
different versions of 
@playwright/test. This 
usually happens
  when one of the 
dependencies in your 
package.json depends on 
@playwright/test.[39m
[90m [2mÔØ»[22m TestT
ypeImpl._currentSuite no
de_modules/playwright/li
b/common/testType.js:[2
m75:13[22m[39m
[90m [2mÔØ»[22m 
TestTypeImpl._describe n
ode_modules/playwright/l
ib/common/testType.js:[
2m115:24[22m[39m
[90m [2mÔØ»[22m 
Function.describe node_m
odules/playwright/lib/tr
ansform/transform.js:[2
m275:12[22m[39m
[36m [2mÔØ»[22m src/_
_tests__/e2e/booking.spe
c.ts:[2m13:6[22m[39m
    [90m 11| [39m 
*/[39m
    [90m 12| [39m
    [90m 13| [39mtest
[33m.[39m[34mdescribe
[39m([32m"Flujo de 
Reserva de 
Cita"[39m[33m,[39m 
() [33m=>[39m {
    [90m   | [39m     
[31m^[39m
    [90m 14| [39m  [3
4mtest[39m([32m"deber├
¡a mostrar p├ígina de ne
gocio"[39m[33m,[39m 
[35masync[39m ({ page 
}) [33m=>[39m {
    [90m 15| [39m    
[90m// Navegar a un 
negocio de ejemplo[39m

[31m[2mÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»
ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»
ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»
ÔÄ»ÔÄ»[2/11]ÔÄ»[22m[39
m

[41m[1m FAIL 
[22m[49m src/__tests__
/e2e/dashboard.spec.ts[
2m [ src/__tests__/e2e/d
ashboard.spec.ts ][22m
[31m[1mError[22m: 
Playwright Test did not 
expect test.describe() 
to be called here.
Most common reasons 
include:
- You are calling 
test.describe() in a 
configuration file.
- You are calling 
test.describe() in a 
file that is imported 
by the configuration 
file.
- You have two 
different versions of 
@playwright/test. This 
usually happens
  when one of the 
dependencies in your 
package.json depends on 
@playwright/test.[39m
[90m [2mÔØ»[22m TestT
ypeImpl._currentSuite no
de_modules/playwright/li
b/common/testType.js:[2
m75:13[22m[39m
[90m [2mÔØ»[22m 
TestTypeImpl._describe n
ode_modules/playwright/l
ib/common/testType.js:[
2m115:24[22m[39m
[90m [2mÔØ»[22m 
Function.describe node_m
odules/playwright/lib/tr
ansform/transform.js:[2
m275:12[22m[39m
[36m [2mÔØ»[22m src/_
_tests__/e2e/dashboard.s
pec.ts:[2m13:6[22m[39
m
    [90m 11| [39m 
*/[39m
    [90m 12| [39m
    [90m 13| [39mtest
[33m.[39m[34mdescribe
[39m([32m"Dashboard de 
Cliente"[39m[33m,[39m
 () [33m=>[39m {
    [90m   | [39m     
[31m^[39m
    [90m 14| [39m  tes
t[33m.[39m[34mbeforeE
ach[39m([35masync[39m
 ({ page }) 
[33m=>[39m {
    [90m 15| [39m    
[90m// NOTA: Estos 
tests requieren 
autenticaci├│n[39m

[31m[2mÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»
ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»
ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»
ÔÄ»ÔÄ»[3/11]ÔÄ»[22m[39
m


[31mÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»Ô
Ä»[39m[1m[41m Failed 
Tests 8 [49m[22m[31mÔ
Ä»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»[39
m

[41m[1m FAIL 
[22m[49m src/__tests__
/integration/api/users/d
elete-account.test.ts[2
m > [22mAPI: Eliminar 
Cuenta (/api/delete-acco
unt)[2m > 
[22mEliminaci├│n de 
Cuenta de Cliente[2m > 
[22mdeber├¡a eliminar 
cuenta de cliente sin 
citas activas
[31m[1mTypeError[22m:
 Cannot read properties 
of undefined (reading 
'deleteUser')[39m
[36m [2mÔØ»[22m src/_
_tests__/integration/api
/users/delete-account.te
st.ts:[2m44:37[22m[39
m
    [90m 42| [39m
    [90m 43| [39m     
 [90m// Mock: Eliminar 
cuenta de auth[39m
    [90m 44| [39m     
 mockSupabaseClient[33m
.[39mauth[33m.[39madm
in[33m.[39mdeleteUser
[33m.[39m[34mmockResol
vedValue[39m({
    [90m   | [39m     
                        
       [31m^[39m
    [90m 45| [39m     
   data[33m:[39m 
{}[33m,[39m
    [90m 46| [39m     
   error[33m:[39m [35
mnull[39m[33m,[39m

[31m[2mÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»
ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»
ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»
ÔÄ»ÔÄ»[4/11]ÔÄ»[22m[39
m

[41m[1m FAIL 
[22m[49m src/__tests__
/integration/api/users/d
elete-account.test.ts[2
m > [22mAPI: Eliminar 
Cuenta (/api/delete-acco
unt)[2m > 
[22mEliminaci├│n de 
Cuenta de Cliente[2m > 
[22mdeber├¡a rechazar 
eliminaci├│n con citas 
pendientes
[31m[1mTypeError[22m:
 Cannot read properties 
of undefined (reading 'm
ockResolvedValue')[39m
[36m [2mÔØ»[22m src/_
_tests__/integration/api
/users/delete-account.te
st.ts:[2m63:10[22m[39
m
    [90m 61| [39m     
   [33m.[39m[34mselec
t[39m()
    [90m 62| [39m     
   [33m.[39m[34meq[3
9m()
    [90m 63| [39m     
   [33m.[39m[35min[3
9m[33m.[39m[34mmockRe
solvedValue[39m({
    [90m   | [39m     
    [31m^[39m
    [90m 64| [39m     
     data[33m:[39m cit
asPendientes[33m,[39m
    [90m 65| [39m     
     error[33m:[39m [
35mnull[39m[33m,[39m

[31m[2mÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»
ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»
ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»
ÔÄ»ÔÄ»[5/11]ÔÄ»[22m[39
m

[41m[1m FAIL 
[22m[49m src/__tests__
/integration/api/users/d
elete-account.test.ts[2
m > [22mAPI: Eliminar 
Cuenta (/api/delete-acco
unt)[2m > 
[22mEliminaci├│n de 
Cuenta de Cliente[2m > 
[22mdeber├¡a rechazar 
eliminaci├│n con citas 
confirmadas
[31m[1mTypeError[22m:
 Cannot read properties 
of undefined (reading 'm
ockResolvedValue')[39m
[36m [2mÔØ»[22m src/_
_tests__/integration/api
/users/delete-account.te
st.ts:[2m81:10[22m[39
m
    [90m 79| [39m     
   [33m.[39m[34mselec
t[39m()
    [90m 80| [39m     
   [33m.[39m[34meq[3
9m()
    [90m 81| [39m     
   [33m.[39m[35min[3
9m[33m.[39m[34mmockRe
solvedValue[39m({
    [90m   | [39m     
    [31m^[39m
    [90m 82| [39m     
     data[33m:[39m cit
asConfirmadas[33m,[39m
    [90m 83| [39m     
     error[33m:[39m [
35mnull[39m[33m,[39m

[31m[2mÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»
ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»
ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»
ÔÄ»ÔÄ»[6/11]ÔÄ»[22m[39
m

[41m[1m FAIL 
[22m[49m src/__tests__
/integration/api/users/d
elete-account.test.ts[2
m > [22mAPI: Eliminar 
Cuenta (/api/delete-acco
unt)[2m > 
[22mEliminaci├│n de 
Cuenta de Cliente[2m > 
[22mdeber├¡a permitir 
eliminaci├│n con solo 
citas completadas o 
canceladas
[31m[1mTypeError[22m:
 Cannot read properties 
of undefined (reading 'm
ockResolvedValue')[39m
[36m [2mÔØ»[22m src/_
_tests__/integration/api
/users/delete-account.te
st.ts:[2m101:10[22m[3
9m
    [90m 99| [39m     
   [33m.[39m[34mselec
t[39m()
    [90m100| [39m     
   [33m.[39m[34meq[3
9m()
    [90m101| [39m     
   [33m.[39m[35min[3
9m[33m.[39m[34mmockRe
solvedValue[39m({
    [90m   | [39m     
    [31m^[39m
    [90m102| [39m     
     data[33m:[39m cit
asFinalizadas[33m,[39m
    [90m103| [39m     
     error[33m:[39m [
35mnull[39m[33m,[39m

[31m[2mÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»
ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»
ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»
ÔÄ»ÔÄ»[7/11]ÔÄ»[22m[39
m

[41m[1m FAIL 
[22m[49m src/__tests__
/integration/api/users/d
elete-account.test.ts[2
m > [22mAPI: Eliminar 
Cuenta (/api/delete-acco
unt)[2m > 
[22mEliminaci├│n de 
Cuenta de Negocio[2m > 
[22mdeber├¡a rechazar 
si el negocio tiene 
citas activas
[31m[1mTypeError[22m:
 Cannot read properties 
of undefined (reading 'm
ockResolvedValue')[39m
[36m [2mÔØ»[22m src/_
_tests__/integration/api
/users/delete-account.te
st.ts:[2m143:10[22m[3
9m
    [90m141| [39m     
   [33m.[39m[34mselec
t[39m()
    [90m142| [39m     
   [33m.[39m[34meq[3
9m()
    [90m143| [39m     
   [33m.[39m[35min[3
9m[33m.[39m[34mmockRe
solvedValue[39m({
    [90m   | [39m     
    [31m^[39m
    [90m144| [39m     
     data[33m:[39m 
citasActivas[33m,[39m
    [90m145| [39m     
     error[33m:[39m [
35mnull[39m[33m,[39m

[31m[2mÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»
ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»
ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»
ÔÄ»ÔÄ»[8/11]ÔÄ»[22m[39
m

[41m[1m FAIL 
[22m[49m src/__tests__
/integration/api/users/d
elete-account.test.ts[2
m > [22mAPI: Eliminar 
Cuenta (/api/delete-acco
unt)[2m > 
[22mEliminaci├│n de 
Cuenta de Negocio[2m > 
[22mdeber├¡a permitir 
eliminaci├│n si el 
negocio est├í inactivo
[31m[1mTypeError[22m:
 Cannot read properties 
of undefined (reading 'm
ockResolvedValue')[39m
[36m [2mÔØ»[22m src/_
_tests__/integration/api
/users/delete-account.te
st.ts:[2m182:10[22m[3
9m
    [90m180| [39m     
   [33m.[39m[34mselec
t[39m()

[2m Test Files [22m [1m[31m4 failed[39m[22m[2m | [22m[1m[32m15 passed[39m[22m[90m (19)[39m
[2m      Tests [22m [1m[31m8 failed[39m[22m[2m | [22m[1m[32m298 passed[39m[22m[90m (306)[39m
[2m   Start at [22m 13:58:27
[2m   Duration [22m 5.93s[2m (transform 2.31s, setup 12.10s, import 2.48s, tests 432ms, environment 34.35s)[22m

    [90m181| [39m     
   [33m.[39m[34meq[3
9m()
    [90m182| [39m     
   [33m.[39m[35min[3
9m[33m.[39m[34mmockRe
solvedValue[39m({
    [90m   | [39m     
    [31m^[39m
    [90m183| [39m     
     data[33m:[39m 
[][33m,[39m
    [90m184| [39m     
     error[33m:[39m [
35mnull[39m[33m,[39m

[31m[2mÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»
ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»
ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»
ÔÄ»ÔÄ»[9/11]ÔÄ»[22m[39
m

[41m[1m FAIL 
[22m[49m src/__tests__
/integration/api/users/d
elete-account.test.ts[2
m > [22mAPI: Eliminar 
Cuenta (/api/delete-acco
unt)[2m > [22mProceso 
de Eliminaci├│n[2m > 
[22mdeber├¡a eliminar 
en orden correcto 
(cascada)
[31m[1mTypeError[22m:
 Cannot read properties 
of undefined (reading 'm
ockResolvedValue')[39m
[36m [2mÔØ»[22m src/_
_tests__/integration/api
/users/delete-account.te
st.ts:[2m211:10[22m[3
9m
    [90m209| [39m     
   [33m.[39m[34mselec
t[39m()
    [90m210| [39m     
   [33m.[39m[34meq[3
9m()
    [90m211| [39m     
   [33m.[39m[35min[3
9m[33m.[39m[34mmockRe
solvedValue[39m({
    [90m   | [39m     
    [31m^[39m
    [90m212| [39m     
     data[33m:[39m 
[][33m,[39m
    [90m213| [39m     
     error[33m:[39m [
35mnull[39m[33m,[39m

[31m[2mÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»
ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»
ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»
ÔÄ»[10/11]ÔÄ»[22m[39m

[41m[1m FAIL 
[22m[49m src/__tests__
/integration/api/users/d
elete-account.test.ts[2
m > [22mAPI: Eliminar 
Cuenta (/api/delete-acco
unt)[2m > [22mProceso 
de Eliminaci├│n[2m > 
[22mdeber├¡a manejar 
rollback si falla 
eliminaci├│n de auth
[31m[1mTypeError[22m:
 Cannot read properties 
of undefined (reading 
'deleteUser')[39m
[36m [2mÔØ»[22m src/_
_tests__/integration/api
/users/delete-account.te
st.ts:[2m260:37[22m[3
9m
    [90m258| [39m
    [90m259| [39m     
 [90m// Mock: Falla 
eliminaci├│n de 
auth[39m
    [90m260| [39m     
 mockSupabaseClient[33m
.[39mauth[33m.[39madm
in[33m.[39mdeleteUser
[33m.[39m[34mmockResol
vedValue[39m({
    [90m   | [39m     
                        
       [31m^[39m
    [90m261| [39m     
   data[33m:[39m [35m
null[39m[33m,[39m
    [90m262| [39m     
   error[33m:[39m { 
message[33m:[39m 
[32m"Auth deletion 
failed"[39m[33m,[39m 
code[33m:[39m 
[32m"auth_error"[39m 
}[33m,[39m

[31m[2mÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»
ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»
ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»
ÔÄ»[11/11]ÔÄ»[22m[39m

